{% extends 'hot_pot/base.html' %}

{% block content %}
    {% load static %}
    <img src="{% static 'img/header.png' %}" class="header" alt="">

    <button type="button" class="btn btn-lg create create-room" onclick="openForm()">Create a Room</button>

    <div class="my-3 p-3 rounded box-shadow popular">
        <h4 class="border-bottom border-gray pb-2 mb-0">Popular Now</h4>
        <div class="row-card">

            {% for room in popular %}
                <a href="{% url 'room' room.id %}" class="col-sm-3">
                    <div class="card bg-light rounded mx-2 my-3">
                        {% if room.cover_pic %}
                            <img src="{% url 'room_img' room.id %}" class="card-img-top" alt="">
                        {% endif %}
                        <div class="card-body">
                            <h4 class="card-title">{{ room.name }}</h4>
                            <p class="card-text">{{ room.description }}</p>
                            <p class="card-text">
                                <small class="text-muted">Owner: {{ room.owner.username }}</small>
                                {% if room.is_hotpot_mode %}
                                    <br>
                                    <small class="text-info"><em>HotPot Mode</em></small>
                                {% endif %}
                            </p>
                        </div>
                    </div>

                </a>
            {% endfor %}
        </div>
    </div>
    <div class='error'>
        {{ error }}
        {{ form.errors }}
        {{ form.non_field_errors }}
    </div>

    <div class="form-popup" id="create_room_div">
        <form class="form-container" method="POST">{% csrf_token %}
            <h1>Create A Room</h1>

            <div class="form-group my-3 mx-3">
                {% if form %}
                    <div class='error'>
                        {{ form.errors }}
                        {{ form.non_field_errors }}
                    </div>
                    </div>
                    <div>
                        <p class="font-weight-bold mb-0 ">{{ form.name.label }}
                            {{ form.name }}</p>

                    </div>
                    <div class="my-3">
                        <p class="font-weight-bold mb-0 ">{{ form.description.label }}{{ form.description }}</p>

                    </div>
                    <div>
                        <p class="font-weight-bold mb-0 ">Room Photo

                            {{ form.cover_pic }}</p>

                    </div>
                    <div>
                        <p class="font-weight-bold mb-0 ">HotPot Mode
                            {{ form.is_hotpot_mode }}
                            <span class="small"> (All users become DJs.)</span>
                        </p>

                    </div>



                {% endif %}

            <input type="submit" name="create_room" value="Create" class="btn create-room">
            <button type="button" class="btn" onclick="closeForm()">Close</button>
        </form>
    </div>
    <script>


        function openForm() {
            document.getElementById("create_room_div").style.display = "block";
        }

        function closeForm() {
            document.getElementById("create_room_div").style.display = "none";
        }
    </script>

{% endblock %}